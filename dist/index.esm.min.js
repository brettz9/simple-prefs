function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function n(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var a=function(){function t(r){e(this,t),this.configurePrefs(r)}return r(t,[{key:"configurePrefs",value:function(e){var t=e.namespace,r=e.defaults,n=e.prefDefaults,a=void 0===n?u(r):n;Object.assign(this,{namespace:t,prefDefaults:a})}},{key:"getPref",value:function(e){try{var t=localStorage.getItem(this.namespace+e);return n(null===t?this.prefDefaults.getPrefDefault(e):JSON.parse(t),void 0,!(null===t))}catch(e){return Promise.reject(e)}}},{key:"setPref",value:function(e,t){try{return n(localStorage.setItem(this.namespace+e,JSON.stringify(t)))}catch(e){return Promise.reject(e)}}},{key:"bind",value:function(){return{getPref:this.getPref.bind(this),setPref:this.setPref.bind(this)}}},{key:"listen",value:function(e,t){var r=this;"function"==typeof e&&(t=e,e=void 0),window.addEventListener("storage",(function(n){n.key.startsWith(r.namespace)&&(void 0===e||n.key.startsWith(r.namespace+e))&&t(n)}))}}]),t}(),i=function(){function t(r){var n=r.defaults;e(this,t),this.defaults=n}return r(t,[{key:"getPrefDefault",value:function(e){try{return n(this.defaults[e])}catch(e){return Promise.reject(e)}}},{key:"setPrefDefault",value:function(e,t){try{var r=this.defaults[e];return this.defaults[e]=t,n(r)}catch(e){return Promise.reject(e)}}}]),t}();function u(e){return new i({defaults:e})}export{a as SimplePrefs,i as SimplePrefsDefaults,u as simplePrefsDefaults};
//# sourceMappingURL=index.esm.min.js.map
