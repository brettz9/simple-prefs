!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).SimplePrefs={})}(this,(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function f(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var i=function(){function e(r){t(this,e),this.configurePrefs(r)}return n(e,[{key:"configurePrefs",value:function(e){var t=e.namespace,r=e.defaults,n=e.prefDefaults,f=void 0===n?s(r):n;Object.assign(this,{namespace:t,prefDefaults:f})}},{key:"getPref",value:function(e){try{var t=localStorage.getItem(this.namespace+e);return f(null===t?this.prefDefaults.getPrefDefault(e):JSON.parse(t),void 0,!(null===t))}catch(e){return Promise.reject(e)}}},{key:"setPref",value:function(e,t){try{return f(localStorage.setItem(this.namespace+e,JSON.stringify(t)))}catch(e){return Promise.reject(e)}}},{key:"bind",value:function(){return{getPref:this.getPref.bind(this),setPref:this.setPref.bind(this)}}}]),e}(),u=function(){function e(r){var n=r.defaults;t(this,e),this.defaults=n}return n(e,[{key:"getPrefDefault",value:function(e){try{return f(this.defaults[e])}catch(e){return Promise.reject(e)}}},{key:"setPrefDefault",value:function(e,t){try{var r=this.defaults[e];return this.defaults[e]=t,f(r)}catch(e){return Promise.reject(e)}}}]),e}();function s(e){return new u({defaults:e})}e.SimplePrefs=i,e.SimplePrefsDefaults=u,e.simplePrefsDefaults=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
